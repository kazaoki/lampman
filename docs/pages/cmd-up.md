###### 🚩 コンテナ起動/終了コマンド

# コンテナ起動：`lamp up`
----------------------------------------------------------------------

### `lamp up`

オプション無しで実行すると、現在の `.lampman/config.js` を元に `.lampman/docker-compose.yml` が自動生成され、内部で `docker-compose` が実行されます。ただしこの時、フォアグラウンドモードではなくデーモンモードで機能しますので、ログ等は画面に流れません。  

機能的には以下のコマンドを実行するのとほぼ同等となります。
<pre class="cmd">
$ cd .lampman/
$ docker-compose up -d --project-name=(プロジェクト名)
</pre>

再起動したい場合も同様に `lamp up` と打てばOKです。ymlが更新され必要なコンテナが再起動されます。確実に全て再起動したい場合は `lamp down && lamp up` または `lamp up --flush` と打ってください。（後述）


### `lamp up -f`<br>`lamp up --flush`

既存のコンテナを全て削除してキレイにしてから起動します。  
このオプションは、コンテナが終了していようが起動していようが関係なくすっかりキレイに掃除してから起動を試みるもので、ポート開放がうまくいかなかったり既存コンテナが邪魔してたりする可能性がある場合などにおすすめです。


### `lamp up -v`<br>`lamp up --flush-with-volumes`

上記 `lamp up -f` と一緒に使いますので、実際には `lamp up -fv` 等として使ってください。  
こうすることで、既存のコンテナだけでなく未ロックボリュームも全て削除してキレイにしてから起動するようになります。
（ロックボリュームとは Lampman 独自の識別で `locked_` から始まる名称のボリュームのことです。後述）


### `lamp up -o <オプション文字列>`<br>`lamp up --docker-compose-options=<オプション文字列>`

`docker-compose` コマンドに渡すオプションを文字列で指定可能です。
ただし、ホストOS側の問題なのか、ハイフンの前にバックスラッシュを入れないとエラーになるようです。（Windowsで確認）

<pre class="cmd">
$ lamp up -o "-t 300"      ... NG
$ lamp up -o "\-t 300"     ... OK
</pre>

### `lamp up -D`

デーモンモードじゃなくフォアグラウンドモードで起動します。各コンテナが吐くログが直接確認できるようになりますので、うまくdockerが起動しない場合などに活用してください。
終了する場合は `ctrl+C` キーです。

### `lamp up -n`<br>`lamp up --no-update`

`.lampman/docker-compose.yml` を更新せずに起動させることが可能です。設定ファイルを書き換えてしまったものの、現行のymlのままで起動したい場合などにご指定ください。

